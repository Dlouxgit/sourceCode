{"version":3,"file":"vue.js","sources":["../src/utils.js","../src/global-api/index.js","../src/compiler/parser.js","../src/compiler/generate.js","../src/compiler/index.js","../src/observe/array.js","../src/observe/dep.js","../src/observe/index.js","../src/state.js","../src/observe/scheduler.js","../src/observe/watcher.js","../src/vdom/patch.js","../src/lifecycle.js","../src/init.js","../src/vdom/index.js","../src/render.js","../src/index.js"],"sourcesContent":["export function isFunction(val) {\r\n    return typeof val === 'function'\r\n}\r\n\r\nexport function isObject(val) {\r\n    return typeof val === 'object' && val !== null\r\n}\r\n\r\nlet callbacks = []\r\nlet waiting = false\r\n\r\nfunction flushCallBacks() {\r\n    callbacks.forEach(fn => fn())\r\n    callbacks = []\r\n    waiting = false\r\n}\r\n\r\nexport function nextTick(fn) {\r\n    callbacks.push(fn)\r\n    if (!waiting) {\r\n        waiting = true\r\n        Promise.resolve().then(flushCallBacks)\r\n    }\r\n    return \r\n}\r\n\r\nexport let isArray = Array.isArray\r\n\r\n\r\nlet strats = {}\r\n\r\nlet lifeCycle = [\r\n    'beforeCreate',\r\n    'created',\r\n    'beforeMount',\r\n    'mounted'\r\n]\r\nlifeCycle.forEach(hook => {\r\n    strats[hook] = function (parentVal, childVal) {\r\n        if (childVal) {\r\n            if (parentVal) {\r\n                return parentVal.concat(childVal)\r\n            } else { // 最开始是 {} 和父合并，因此父亲的 key 值一定会走这里变成数组，因此上面的逻辑可以用 concat\r\n                if (isArray(childVal)) {\r\n                    return childVal\r\n                } else {\r\n                    return [childVal]\r\n                }\r\n            }\r\n        } else {\r\n            return [parentVal]\r\n        }\r\n    }\r\n})\r\n\r\nexport function mergeOptions(parentVal, childVal) {\r\n    const options = {}\r\n\r\n    for (let key in parentVal) {\r\n        mergeFileds(key)\r\n    }\r\n\r\n    for (let key in childVal) {\r\n        if (!parentVal.hasOwnProperty(key)) {\r\n            mergeFileds(key)\r\n        }\r\n    }\r\n\r\n    function mergeFileds(key) {\r\n        let strat = strats[key]\r\n        if (strat) {\r\n            options[key] = strat(parentVal[key], childVal[key])\r\n        } else {\r\n            options[key] = childVal[key] || parentVal[key]\r\n        }\r\n    }\r\n\r\n    return options\r\n}\r\nconsole.log(mergeOptions({a: 1}, {b: 1, a: 2}))","import { mergeOptions } from '../utils'\r\nexport function initGlobalAPI(Vue) {\r\n    Vue.options = {}\r\n    Vue.mixin = function (options) {\r\n        this.options = mergeOptions(this.options, options)\r\n        return this\r\n    }\r\n\r\n    Vue.component = function name() {}\r\n    Vue.filter = function name() {}\r\n    Vue.directive = function name() {}\r\n}","\r\nconst ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`; // 匹配标签名的  aa-xxx\r\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`; //  aa:aa-xxx  \r\nconst startTagOpen = new RegExp(`^<${qnameCapture}`); //  此正则可以匹配到标签名 匹配到结果的第一个(索引第一个) [1]\r\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`); // 匹配标签结尾的 </div>  [1]\r\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/; // 匹配属性的\r\n\r\n// [1]属性的key   [3] || [4] ||[5] 属性的值\r\n\r\nconst startTagClose = /^\\s*(\\/?)>/; // 匹配标签结束的  />    > \r\n\r\nexport function parserHTML(html) {\r\n    let stack = []\r\n    let root = null\r\n    function createASTElement(tag, attrs, parent = null) {\r\n        return {\r\n            tag,\r\n            type: 1,\r\n            children: [],\r\n            parent,\r\n            attrs\r\n        }\r\n    }\r\n        function start(tag,attrs){ // [div,p]\r\n        // 遇到开始标签 就取栈中的最后一个作为父节点\r\n        let parent = stack[stack.length-1];\r\n        let element = createASTElement(tag,attrs,parent);\r\n        if(root == null){ // 说明当前节点就是根节点\r\n            root = element\r\n        }\r\n        if(parent){\r\n            element.parent = parent; // 跟新p的parent属性 指向parent\r\n            parent.children.push(element);\r\n        }\r\n        stack.push(element)\r\n    }\r\n    function end(tagName) {\r\n        let endTag = stack.pop()\r\n        if (endTag.tag != tagName) {\r\n            console.log('标签错误')\r\n        }\r\n    }\r\n\r\n    function text(chars) {\r\n        let parent = stack[stack.length - 1]\r\n        chars = chars.replace(/\\s/g, '')\r\n        if (chars) {\r\n            parent.children.push({\r\n                type: 2, // 文本\r\n                text: chars\r\n            })\r\n        }\r\n    }\r\n\r\n    function advance(len) {\r\n        html = html.substring(len)\r\n    }\r\n    function parseStartTag() {\r\n        const start = html.match(startTagOpen)\r\n        if (start) {\r\n            const match = {\r\n                tagName: start[1],\r\n                attrs: []\r\n            }\r\n            advance(start[0].length)\r\n            let end\r\n            let attr\r\n            while (!(end = html.match(startTagClose)) && (attr = html.match(attribute))) {\r\n                match.attrs.push({\r\n                    name: attr[1],\r\n                    value: attr[3] || attr[4] || attr[5] // 属性可能为 height=1 height=\"1\" height='1'\r\n                })\r\n                advance(attr[0].length)\r\n            }\r\n            if (end) {\r\n                advance(end[0].length)\r\n            }\r\n            return match\r\n        }\r\n        return false\r\n    }\r\n    while (html) {\r\n        let index = html.indexOf('<')\r\n        if (index === 0) {\r\n            const startTagMatch = parseStartTag()\r\n            if (startTagMatch) {\r\n                start(startTagMatch.tagName, startTagMatch.attrs)\r\n                continue\r\n            }\r\n            let endTagMatch\r\n            if (endTagMatch = html.match(endTag)) {\r\n                end(endTagMatch[1])\r\n                advance(endTagMatch[0].length)\r\n                continue\r\n            }\r\n        }\r\n        if (index > 0) {\r\n            let chars = html.substring(0, index)\r\n            text(chars)\r\n            advance(chars.length)\r\n        }\r\n    }\r\n    console.log(root)\r\n    return root\r\n}","const defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g; // {{   xxx  }}  \r\n\r\nfunction genProps(attrs) {\r\n    let str = ''\r\n\r\n    for (let i = 0; i < attrs.length; i++) {\r\n        let attr = attrs[i]\r\n        if (attr.name === 'style') {\r\n            let styles = {}\r\n            attr.value.replace(/([^;:]+):([^;:]+)/g, function() {\r\n                styles[arguments[1]] = arguments[2];\r\n            })\r\n            attr.value = styles\r\n        }\r\n        str += `${attr.name}: ${JSON.stringify(attr.value)},`\r\n    }\r\n    return `{${str.slice(0, -1)}}`\r\n}\r\n\r\nfunction gen(el) {\r\n    if (el.type === 1) {\r\n        return generate(el)\r\n    } else {\r\n        let text = el.text\r\n        if (!defaultTagRE.test(text))\r\n            return `_v('${text}')`\r\n        let lastIndex = defaultTagRE.lastIndex = 0\r\n        let tokens = []\r\n        let match\r\n        while (match = defaultTagRE.exec(text)) {\r\n            let index = match.index\r\n            if (index > lastIndex) {\r\n                tokens.push(JSON.stringify(text.slice(lastIndex, index)))\r\n            }\r\n            tokens.push(`_s(${match[1].trim()})`)\r\n            lastIndex = index + match[0].length\r\n        }\r\n        if (lastIndex < text.length) {\r\n            tokens.push(JSON.stringify(text.slice(lastIndex)))\r\n        }\r\n        return `_v(${tokens.join('+')})`\r\n    }\r\n}\r\n\r\nfunction genChildren(el) {\r\n    let children = el.children\r\n    if (children) {\r\n        return children.map(item => gen(item)).join(',')\r\n    }\r\n    return false\r\n}\r\n\r\nexport function generate(ast) {\r\n    let children = genChildren(ast)\r\n    let code = `_c('${ast.tag}', ${\r\n        ast.attrs.length ? genProps(ast.attrs) : 'undefined'\r\n    }${\r\n        children? `,${children}` : ''\r\n    })`\r\n    return code\r\n}","import { parserHTML } from './parser'\r\nimport { generate } from './generate'\r\nexport function compileToFunction(template) {\r\n    let ast = parserHTML(template)\r\n    let code = generate(ast)\r\n    let render = new Function(`with(this){return ${code}}`)\r\n    console.log('redner', render.toString())\r\n    return render\r\n}","let oldArrayPrototype = Array.prototype\r\n\r\nexport let arrayMethods = Object.create(oldArrayPrototype)\r\n\r\nlet methods = [\r\n    'push',\r\n    'shift',\r\n    'pop',\r\n    'unshift',\r\n    'reverse',\r\n    'sort',\r\n    'splice'\r\n]\r\n\r\nmethods.forEach(method => {\r\n    arrayMethods[method] = function (...args) {\r\n        oldArrayPrototype[method].call(this, ...args)\r\n\r\n        let inserted = null\r\n        let ob = this.__ob__\r\n        switch (method) {\r\n            case 'splice':\r\n                inserted =  args.slice(2)\r\n                break\r\n            case 'push':\r\n            case 'shift':\r\n                inserted = args\r\n                break\r\n        }\r\n        if (inserted) ob.observeArray(inserted)\r\n    }\r\n})","let id = 0\r\nclass Dep {\r\n    constructor(vm) {\r\n        this.vm = vm\r\n        this.id = id++\r\n        this.subs = []\r\n    }\r\n\r\n    depend() {\r\n        Dep.target.addDep(this)\r\n    }\r\n\r\n    addSub(watcher) {\r\n        this.subs.push(watcher)\r\n    }\r\n\r\n    notify() {\r\n        this.subs.forEach(item => item.update())\r\n    }\r\n}\r\n\r\nDep.target = null\r\n\r\nexport default Dep","import { isArray, isObject } from '../utils'\r\nimport { arrayMethods } from './array'\r\nimport Dep from './dep'\r\n\r\nclass Observer {\r\n    constructor(value) {\r\n        Object.defineProperty(value, '__ob__', {\r\n            value: this,\r\n            enumerable: false\r\n        })\r\n\r\n        if (isArray(value)) {\r\n            value.__proto__ = arrayMethods\r\n            this.observeArray(value)\r\n        } else {\r\n            this.walk(value)\r\n        }\r\n    }\r\n\r\n    observeArray(data) {\r\n        data.forEach(item => observe(item))\r\n    }\r\n\r\n    walk(data) {\r\n        Object.keys(data).forEach(key => {\r\n            defineReactive(data, key, data[key])\r\n        })\r\n    }\r\n}\r\n\r\nfunction defineReactive(obj, key, value) {\r\n    observe(value)\r\n\r\n    let dep = new Dep()\r\n\r\n    Object.defineProperty(obj, key, {\r\n        get() {\r\n            if (Dep.target) {\r\n                dep.depend()\r\n            }\r\n\r\n            return value\r\n        },\r\n        set(newValue) {\r\n            if (newValue === value)\r\n                return\r\n            observe(newValue)\r\n            value = newValue\r\n            dep.notify()\r\n        }\r\n    })\r\n}\r\n\r\nexport function observe(value) {\r\n    if (!isObject(value))\r\n        return\r\n    if (value.__ob__)\r\n        return\r\n    return new Observer(value)\r\n}","import { observe } from './observe'\r\nimport { isFunction } from './utils'\r\n\r\nexport function initState(vm) {\r\n    const opts = vm.$options\r\n\r\n    if (opts.data) {\r\n        initData(vm)\r\n    }\r\n}\r\n\r\nfunction proxy(vm, key, source) {\r\n    Object.defineProperty(vm, key, {\r\n        get() {\r\n            return vm[source][key]\r\n        },\r\n        set(newValue) {\r\n            vm[source][key] = newValue\r\n        }\r\n    })\r\n}\r\n\r\nfunction initData(vm) {\r\n    let data = vm.$options.data\r\n    \r\n    data = vm._data = isFunction(data) ? data.call(vm) : data\r\n\r\n    observe(data)\r\n\r\n    for (let key in data) {\r\n        proxy(vm, key, '_data')\r\n    }\r\n}","import { nextTick } from \"../utils\"\r\n\r\nlet queue = []\r\nlet has = {}\r\n\r\nfunction flushSchedulerQueue() {\r\n    queue.forEach(watcher => watcher.run())\r\n    queue = []\r\n    has = {}\r\n    pending = false\r\n}\r\n\r\nlet pending = false\r\nexport function queueWatcher(watcher) {\r\n    let id = watcher.id\r\n    if (has[id] == null) { // 0 == null toBeFalsy(),  0 == undefined toBeFalsy(),  null == undefined toBeTruthy()\r\n        has[id] = true\r\n        queue.push(watcher)\r\n        if (!pending) {\r\n            nextTick(flushSchedulerQueue)\r\n            pending = true\r\n        }\r\n    }\r\n}","import Dep from './dep'\r\nimport { queueWatcher } from './scheduler'\r\n\r\nlet id = 0\r\nclass Watcher {\r\n    constructor(vm, fn, cb, options) {\r\n        this.vm = vm\r\n        this.fn = fn\r\n        this.cb = cb\r\n        this.options = options\r\n        this.id = id++\r\n        this.depIds = new Set()\r\n        this.getter = fn\r\n        this.deps = []\r\n        this.get()\r\n    }\r\n\r\n    addDep(dep) {\r\n        let depId = dep.id\r\n        if (!this.depIds.has(depId)) {\r\n            this.depIds.add(depId)\r\n            this.deps.push(dep)\r\n            dep.subs.push(this)\r\n        }\r\n    }\r\n\r\n    get() {\r\n        Dep.target = this\r\n        this.getter()\r\n        Dep.target = null\r\n    }\r\n\r\n    update() {\r\n        queueWatcher(this)\r\n    }\r\n\r\n    run() {\r\n        console.log('渲染触发')\r\n        this.get()\r\n    }\r\n}\r\n\r\nexport default Watcher","export function patch(el, vnode) {\r\n    const elm = createElm(vnode) // 创造真实节点\r\n    const parentNode = el.parentNode\r\n    parentNode.insertBefore(elm, el.nextSibling)\r\n    parentNode.removeChild(el)\r\n    return elm\r\n}\r\n\r\nfunction createElm(vnode) {\r\n    let { tag, data, children, text, vm } = vnode\r\n    if (typeof tag === 'string') {\r\n        vnode.el = document.createElement(tag)\r\n        updateProperties(vnode.el, data)\r\n        children.forEach(child => {\r\n            vnode.el.appendChild(createElm(child))\r\n        })\r\n    } else {\r\n        // text 没有 tag\r\n        vnode.el = document.createTextNode(text)\r\n    }\r\n    return vnode.el\r\n}\r\n\r\nfunction updateProperties(el, props = {}) {\r\n    for (let key in props) {\r\n        el.setAttribute(key, props[key])\r\n    }\r\n}","import Watcher from './observe/watcher'\r\n\r\nimport { patch } from './vdom/patch'\r\n\r\nexport function mountComponent(vm) {\r\n    const updateComponent = () => {\r\n        vm._update(vm._render())\r\n    }\r\n\r\n    callHook(vm, 'beforeCreated')\r\n\r\n    new Watcher(vm, updateComponent, () => {\r\n        console.log('hook')\r\n        callHook(vm, 'created')\r\n    }, true)\r\n    callHook(vm, 'mounted')\r\n}\r\n\r\nexport function lifecycleMixin(Vue) {\r\n    Vue.prototype._update = function (vnode) {\r\n        const vm = this\r\n        vm.$el = patch(vm.$el, vnode)\r\n    }\r\n}\r\n\r\nexport function callHook(vm, hook) {\r\n    let handlers = vm.$options[hook]\r\n    console.log(vm.$options)\r\n    console.log(handlers)\r\n    debugger\r\n    handlers && handlers.forEach(handler => {\r\n        handler.call(vm)\r\n    })\r\n}","import { compileToFunction } from './compiler'\r\nimport { initState } from './state'\r\nimport { mountComponent } from './lifecycle'\r\nimport { mergeOptions, nextTick } from './utils'\r\n\r\nexport function initMixin(Vue) {\r\n    Vue.prototype._init = function (options) {\r\n        const vm = this\r\n        vm.$options = mergeOptions(vm.constructor.options, options) // Vue 是全局的 Vue 构造函数，vm.constructor 可能是全局的 Vue，也可能是子类的构造函数，目前这里效果一样\r\n\r\n        initState(vm)\r\n\r\n        if (vm.$options.el) {\r\n            console.log('页面挂载')\r\n            vm.$mount(vm.$options.el)\r\n        }\r\n    }\r\n    Vue.prototype.$mount = function (el) {\r\n        const vm = this\r\n        const opts = vm.$options\r\n        el = document.querySelector(el)\r\n        vm.$el = el\r\n        if (!opts.render) {\r\n            // 模板编译\r\n            let template = opts.template\r\n            \r\n            if (!template) {\r\n                template = el.outerHTML\r\n            }\r\n            let render = compileToFunction(el.outerHTML)\r\n            opts.render = render\r\n        }\r\n        mountComponent(vm)\r\n    }\r\n    Vue.prototype.$nextTick = nextTick\r\n}\r\n","export function createElement(vm, tag, data = {}, ...children) {\r\n    return vnode(vm, tag, data, children, data.key, undefined)\r\n}\r\n\r\nexport function createText(vm, text) {\r\n    return vnode(vm, undefined, undefined, undefined, undefined, text)\r\n}\r\n\r\nfunction vnode(vm, tag, data, children, key, text) {\r\n    return {\r\n        vm,\r\n        tag,\r\n        data,\r\n        children,\r\n        key,\r\n        text\r\n    }\r\n}","import { isObject } from './utils'\r\nimport { createElement, createText } from './vdom'\r\n\r\nexport function renderMixin(Vue) {\r\n    // 生成虚拟元素节点\r\n    Vue.prototype._c = function (...args) {\r\n        const vm = this\r\n        return createElement(vm, ...args)\r\n    }\r\n\r\n    // 生成虚拟文本节点\r\n    Vue.prototype._v = function (text) {\r\n        const vm = this\r\n        return createText(vm, text)\r\n    }\r\n\r\n    // 把属性变成字符串\r\n    Vue.prototype._s = function (val) {\r\n        if (isObject(val))\r\n            return JSON.stringify(val)\r\n        return val\r\n    }\r\n\r\n\r\n    Vue.prototype._render = function () {\r\n        const vm = this\r\n        const { render } = vm.$options\r\n        const vnode = render.call(vm)\r\n        return vnode\r\n    }\r\n}","import { initGlobalAPI } from './global-api'\r\nimport { initMixin } from './init'\r\nimport { lifecycleMixin } from './lifecycle'\r\nimport { renderMixin } from './render'\r\n\r\nfunction Vue(options) {\r\n    this._init(options)\r\n}\r\n\r\ninitMixin(Vue)\r\n\r\nrenderMixin(Vue)\r\n\r\nlifecycleMixin(Vue)\r\n\r\ninitGlobalAPI(Vue)\r\n\r\nexport default Vue"],"names":["isFunction","val","isObject","callbacks","waiting","flushCallBacks","forEach","fn","nextTick","push","Promise","resolve","then","isArray","Array","strats","lifeCycle","hook","parentVal","childVal","concat","mergeOptions","options","key","mergeFileds","hasOwnProperty","strat","console","log","a","b","initGlobalAPI","Vue","mixin","component","name","filter","directive","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","parserHTML","html","stack","root","createASTElement","tag","attrs","parent","type","children","start","length","element","end","tagName","pop","text","chars","replace","advance","len","substring","parseStartTag","match","attr","value","index","indexOf","startTagMatch","endTagMatch","defaultTagRE","genProps","str","i","styles","arguments","JSON","stringify","slice","gen","el","generate","test","lastIndex","tokens","exec","trim","join","genChildren","map","item","ast","code","compileToFunction","template","render","Function","toString","oldArrayPrototype","prototype","arrayMethods","Object","create","methods","method","args","call","inserted","ob","__ob__","observeArray","id","Dep","constructor","vm","subs","depend","target","addDep","addSub","watcher","notify","update","Observer","defineProperty","enumerable","__proto__","walk","data","observe","keys","defineReactive","obj","dep","get","set","newValue","initState","opts","$options","initData","proxy","source","_data","queue","has","flushSchedulerQueue","run","pending","queueWatcher","Watcher","cb","depIds","Set","getter","deps","depId","add","patch","vnode","elm","createElm","parentNode","insertBefore","nextSibling","removeChild","document","createElement","updateProperties","child","appendChild","createTextNode","props","setAttribute","mountComponent","updateComponent","_update","_render","callHook","lifecycleMixin","$el","handlers","handler","initMixin","_init","$mount","querySelector","outerHTML","$nextTick","undefined","createText","renderMixin","_c","_v","_s"],"mappings":"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"}